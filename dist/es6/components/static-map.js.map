{"version":3,"sources":["../../../src/components/static-map.js"],"names":["PureComponent","createElement","createContext","createRef","PropTypes","normalizeStyle","WebMercatorViewport","AutoSizer","Mapbox","mapboxgl","checkVisibilityConstraints","TOKEN_DOC_URL","NO_TOKEN_WARNING","StaticContext","viewport","map","noop","UNAUTHORIZED_ERROR_CODE","CONTAINER_STYLE","position","width","height","overflow","propTypes","Object","assign","oneOfType","number","string","onResize","func","mapStyle","object","preventStyleDiffing","bool","disableTokenWarning","visible","visibilityConstraints","defaultProps","undefined","StaticMap","supported","constructor","props","_map","geometry","options","queryRenderedFeatures","evt","statusCode","error","status","state","accessTokenInvalid","console","setState","_queryParams","componentDidMount","componentWillReceiveProps","componentDidUpdate","componentWillUnmount","_width","_height","_mapboxMapRef","_mapbox","container","current","onError","_mapboxMapError","getMap","prevProps","_updateMapStyle","_updateMapProps","finalize","_updateMapSize","oldProps","newProps","oldMapStyle","setStyle","diff","setProps","_renderNoTokenWarning","style","left","top","key","id","href","_renderOverlays","dimensions","staticContext","viewState","Provider","value","className","children","render","mapContainerStyle","visibility","ref","disableWidth","Number","isFinite","disableHeight","bind","displayName"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport {PureComponent, createElement, createContext, createRef} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {normalizeStyle} from '../utils/style-utils';\n\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport Mapbox from '../mapbox/mapbox';\nimport mapboxgl from '../utils/mapboxgl';\nimport {checkVisibilityConstraints} from '../utils/map-constraints';\n\n/* eslint-disable max-len */\nconst TOKEN_DOC_URL = 'https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens';\nconst NO_TOKEN_WARNING = 'A valid API access token is required to use Mapbox data';\n/* eslint-disable max-len */\n\nexport const StaticContext = createContext({\n  viewport: null,\n  map: null\n});\n\nfunction noop() {}\n\nconst UNAUTHORIZED_ERROR_CODE = 401;\n\nconst CONTAINER_STYLE = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\n\nconst propTypes = Object.assign({}, Mapbox.propTypes, {\n  /** The dimensions of the map **/\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /** Callback when map size changes **/\n  onResize: PropTypes.func,\n\n  /** The Mapbox style. A string url or a MapboxGL style Immutable.Map object. */\n  mapStyle: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object\n  ]),\n  /** There are known issues with style diffing. As stopgap, add option to prevent style diffing. */\n  preventStyleDiffing: PropTypes.bool,\n  /** Hide invalid token warning even if request fails */\n  disableTokenWarning: PropTypes.bool,\n  /** Whether the map is visible */\n  visible: PropTypes.bool,\n\n  /** Advanced features */\n  // Contraints for displaying the map. If not met, then the map is hidden.\n  // Experimental! May be changed in minor version updates.\n  visibilityConstraints: PropTypes.object\n});\n\nconst defaultProps = Object.assign({}, Mapbox.defaultProps, {\n  mapStyle: 'mapbox://styles/mapbox/light-v8',\n  preventStyleDiffing: false,\n  visible: undefined,\n  onResize: noop\n});\n\nexport default class StaticMap extends PureComponent {\n  static supported() {\n    return mapboxgl && mapboxgl.supported();\n  }\n\n  constructor(props) {\n    super(props);\n    this._queryParams = {};\n    if (!StaticMap.supported()) {\n      this.componentDidMount = noop;\n      this.componentWillReceiveProps = noop;\n      this.componentDidUpdate = noop;\n      this.componentWillUnmount = noop;\n    }\n    this.state = {\n      accessTokenInvalid: false\n    };\n    this._width = 0;\n    this._height = 0;\n    this._mapboxMapRef = createRef();\n  }\n\n  componentDidMount() {\n    const {mapStyle} = this.props;\n\n    this._mapbox = new Mapbox(Object.assign({}, this.props, {\n      mapboxgl, // Handle to mapbox-gl library\n      width: this._width,\n      height: this._height,\n      container: this._mapboxMapRef.current,\n      onError: this._mapboxMapError,\n      mapStyle: normalizeStyle(mapStyle)\n    }));\n    this._map = this._mapbox.getMap();\n  }\n\n  componentDidUpdate(prevProps) {\n    this._updateMapStyle(prevProps, this.props);\n    this._updateMapProps(this.props);\n  }\n\n  componentWillUnmount() {\n    this._mapbox.finalize();\n    this._mapbox = null;\n    this._map = null;\n  }\n\n  // External apps can access map this way\n  getMap = () => {\n    return this._map;\n  }\n\n  /** Uses Mapbox's\n    * queryRenderedFeatures API to find features at point or in a bounding box.\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`.\n    * @param {[Number, Number]|[[Number, Number], [Number, Number]]} geometry -\n    *   Point or an array of two points defining the bounding box\n    * @param {Object} options - query options\n    */\n  queryRenderedFeatures = (geometry, options = {}) => {\n    return this._map.queryRenderedFeatures(geometry, options);\n  }\n\n  // Note: needs to be called after render (e.g. in componentDidUpdate)\n  _updateMapSize(width, height) {\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      this._updateMapProps(this.props);\n    }\n  }\n\n  _updateMapStyle(oldProps, newProps) {\n    const mapStyle = newProps.mapStyle;\n    const oldMapStyle = oldProps.mapStyle;\n    if (mapStyle !== oldMapStyle) {\n      this._map.setStyle(normalizeStyle(mapStyle), {diff: !this.props.preventStyleDiffing});\n    }\n  }\n\n  _updateMapProps(props) {\n    if (!this._mapbox) {\n      return;\n    }\n    this._mapbox.setProps(Object.assign({}, props, {\n      width: this._width,\n      height: this._height\n    }));\n  }\n\n  // Handle map error\n  _mapboxMapError = (evt) => {\n    const statusCode = evt.error && evt.error.status || evt.status;\n    if (statusCode === UNAUTHORIZED_ERROR_CODE && !this.state.accessTokenInvalid) {\n      // Mapbox throws unauthorized error - invalid token\n      console.error(NO_TOKEN_WARNING); // eslint-disable-line\n      this.setState({accessTokenInvalid: true});\n    }\n  }\n\n  _renderNoTokenWarning() {\n    if (this.state.accessTokenInvalid && !this.props.disableTokenWarning) {\n      const style = {\n        position: 'absolute',\n        left: 0,\n        top: 0\n      };\n      return (\n        createElement('div', {key: 'warning', id: 'no-token-warning', style}, [\n          createElement('h3', {key: 'header'}, NO_TOKEN_WARNING),\n          createElement('div', {key: 'text'}, 'For information on setting up your basemap, read'),\n          createElement('a', {key: 'link', href: TOKEN_DOC_URL}, 'Note on Map Tokens')\n        ])\n      );\n    }\n\n    return null;\n  }\n\n  _renderOverlays(dimensions) {\n    const {\n      width = this.props.width,\n      height = this.props.height\n    } = dimensions;\n    this._updateMapSize(width, height);\n\n    const staticContext = {\n      viewport: new WebMercatorViewport(Object.assign({}, this.props, this.props.viewState, {\n        width,\n        height\n      })),\n      map: this._map\n    };\n\n    return createElement(StaticContext.Provider, {value: staticContext},\n      createElement('div', {\n        key: 'map-overlays',\n        className: 'overlays',\n        style: CONTAINER_STYLE,\n        children: this.props.children\n      })\n    );\n  }\n\n  render() {\n    const {className, width, height, style, visibilityConstraints} = this.props;\n    const mapContainerStyle = Object.assign({position: 'relative'}, style, {width, height});\n\n    const visible = this.props.visible &&\n      checkVisibilityConstraints(this.props.viewState || this.props, visibilityConstraints);\n\n    const mapStyle = Object.assign({}, CONTAINER_STYLE, visible ? {\n      visibility: visible ? 'visible' : 'hidden'\n    } : {});\n\n    return createElement('div', {\n      key: 'map-container',\n      style: mapContainerStyle,\n      children: [\n        createElement('div', {\n          key: 'map-mapbox',\n          ref: this._mapboxMapRef,\n          style: mapStyle,\n          className\n        }),\n        // AutoSizer is a pure component and does not rerender when map props change\n        // rebind the callback so that it's triggered every render pass\n        createElement(AutoSizer, {\n          key: 'autosizer',\n          disableWidth: Number.isFinite(width),\n          disableHeight: Number.isFinite(height),\n          onResize: this.props.onResize\n        }, this._renderOverlays.bind(this)),\n        this._renderNoTokenWarning()\n      ]\n    });\n  }\n}\n\nStaticMap.displayName = 'StaticMap';\nStaticMap.propTypes = propTypes;\nStaticMap.defaultProps = defaultProps;\n"],"file":"static-map.js"}